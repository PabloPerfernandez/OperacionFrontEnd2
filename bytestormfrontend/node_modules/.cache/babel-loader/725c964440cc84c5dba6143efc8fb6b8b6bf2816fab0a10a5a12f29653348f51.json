{"ast":null,"code":"import { ref, watch, defineComponent } from \"vue\";\nexport default defineComponent({\n  props: {\n    equipoSeleccionado: {\n      type: Object,\n      default: null\n    },\n    operativoSeleccionado: {\n      type: Object,\n      default: null\n    },\n    misionSeleccionada: {\n      type: Object,\n      default: null\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    const formData = ref({\n      tipo: \"\",\n      operativoID: \"\",\n      nombre: \"\",\n      rol: \"\",\n      misionAsignada: \"\",\n      misionCodigo: \"\",\n      EquipoCodigo: \"\",\n      descripcion: \"\"\n    });\n    const misiones = ref([]);\n\n    // Watchers para actualizar el formData cuando cambian las selecciones\n    watch(() => props.equipoSeleccionado, newVal => {\n      if (newVal) {\n        formData.value = {\n          tipo: \"Equipo\",\n          EquipoCodigo: newVal.EquipoCodigo || \"\",\n          nombre: newVal.nombre || \"\",\n          descripcion: newVal.descripcion || \"\",\n          rol: \"\",\n          misionAsignada: \"\",\n          operativoID: \"\",\n          misionCodigo: \"\"\n        };\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.operativoSeleccionado, newVal => {\n      if (newVal) {\n        formData.value = {\n          tipo: \"Operativo\",\n          operativoID: newVal.operativoID || \"\",\n          nombre: newVal.nombre || \"\",\n          rol: newVal.rol || \"\",\n          misionAsignada: newVal.misionAsignada || \"\",\n          EquipoCodigo: \"\",\n          misionCodigo: \"\",\n          descripcion: \"\"\n        };\n      }\n    }, {\n      immediate: true\n    });\n    watch(() => props.misionSeleccionada, newVal => {\n      if (newVal) {\n        formData.value = {\n          tipo: \"Misión\",\n          misionCodigo: newVal.misionCodigo || \"\",\n          nombre: newVal.nombre || \"\",\n          descripcion: newVal.descripcion || \"\",\n          rol: \"\",\n          misionAsignada: \"\",\n          EquipoCodigo: \"\",\n          operativoID: \"\"\n        };\n      }\n    }, {\n      immediate: true\n    });\n    const submitForm = async () => {\n      try {\n        let apiUrl = \"\";\n        let method = \"POST\";\n\n        // Mapeo de formData para usar camelCase en el cuerpo JSON\n        const dataToSend = {\n          equipoCodigo: formData.value.EquipoCodigo,\n          nombre: formData.value.nombre,\n          descripcion: formData.value.descripcion,\n          tipo: formData.value.tipo // Si este campo es relevante en el backend\n        };\n        if (formData.value.tipo === \"Operativo\") {\n          // Lógica para operativo\n        } else if (formData.value.tipo === \"Mision\") {\n          // Lógica para misión\n        } else if (formData.value.tipo === \"Equipo\") {\n          if (props.equipoSeleccionado) {\n            apiUrl = `http://localhost:5056/api/equipo/${props.equipoSeleccionado.EquipoCodigo}`;\n            method = \"PUT\";\n          } else {\n            apiUrl = \"http://localhost:5056/api/equipo/crear\";\n          }\n        }\n        const response = await fetch(apiUrl, {\n          method: method,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(dataToSend)\n        });\n        if (!response.ok) {\n          throw new Error(\"Error al guardar los datos\");\n        }\n        emit(\"data-saved\");\n        resetForm();\n      } catch (error) {\n        console.error(\"Error al guardar los datos:\", error);\n      }\n    };\n    const resetForm = () => {\n      formData.value = {\n        tipo: \"\",\n        operativoID: \"\",\n        nombre: \"\",\n        rol: \"\",\n        misionAsignada: \"\",\n        misionCodigo: \"\",\n        EquipoCodigo: \"\",\n        descripcion: \"\"\n      };\n    };\n    return {\n      formData,\n      misiones,\n      submitForm,\n      resetForm\n    };\n  }\n});","map":{"version":3,"names":["ref","watch","defineComponent","props","equipoSeleccionado","type","Object","default","operativoSeleccionado","misionSeleccionada","setup","emit","formData","tipo","operativoID","nombre","rol","misionAsignada","misionCodigo","EquipoCodigo","descripcion","misiones","newVal","value","immediate","submitForm","apiUrl","method","dataToSend","equipoCodigo","response","fetch","headers","body","JSON","stringify","ok","Error","resetForm","error","console"],"sources":["E:\\SmartWay\\Operacion_ByteStorm\\OperacionFrontEnd2\\bytestormfrontend\\src\\components\\CrudForm.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-form @submit.prevent=\"submitForm\">\r\n      <v-select\r\n        v-model=\"formData.tipo\"\r\n        :items=\"['Operativo', 'Misión', 'Equipo']\"\r\n        label=\"Tipo de Entrada\"\r\n        required\r\n      ></v-select>\r\n\r\n      <!-- Campos específicos para Operativo -->\r\n      <template v-if=\"formData.tipo === 'Operativo'\">\r\n        <v-text-field\r\n          v-model=\"formData.operativoID\"\r\n          label=\"ID del Operativo\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-text-field\r\n          v-model=\"formData.nombre\"\r\n          label=\"Nombre del Operativo\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-text-field\r\n          v-model=\"formData.rol\"\r\n          label=\"Rol del Operativo\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-select\r\n          v-model=\"formData.misionAsignada\"\r\n          :items=\"misiones\"\r\n          label=\"Misión Asignada\"\r\n          required\r\n        ></v-select>\r\n      </template>\r\n\r\n      <!-- Campos específicos para Misión -->\r\n      <template v-if=\"formData.tipo === 'Misión'\">\r\n        <v-text-field\r\n          v-model=\"formData.misionCodigo\"\r\n          label=\"Código de Misión\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-text-field\r\n          v-model=\"formData.nombre\"\r\n          label=\"Nombre de la Misión\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-textarea\r\n          v-model=\"formData.descripcion\"\r\n          label=\"Descripción de la Misión\"\r\n        ></v-textarea>\r\n      </template>\r\n\r\n      <!-- Campos específicos para Equipo -->\r\n      <template v-if=\"formData.tipo === 'Equipo'\">\r\n        <v-text-field\r\n          v-model=\"formData.EquipoCodigo\"\r\n          label=\"ID del Equipo\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-text-field\r\n          v-model=\"formData.nombre\"\r\n          label=\"Nombre del Equipo\"\r\n          required\r\n        ></v-text-field>\r\n\r\n        <v-textarea\r\n          v-model=\"formData.descripcion\"\r\n          label=\"Descripción del Equipo\"\r\n        ></v-textarea>\r\n      </template>\r\n\r\n      <!-- Botón de enviar -->\r\n      <v-btn type=\"submit\" color=\"primary\">\r\n        {{ equipoSeleccionado || operativoSeleccionado || misionSeleccionada ? 'Actualizar' : 'Guardar' }}\r\n      </v-btn>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    equipoSeleccionado: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    operativoSeleccionado: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n    misionSeleccionada: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n  },\r\n  setup(props, { emit }) {\r\n    const formData = ref({\r\n      tipo: \"\",\r\n      operativoID: \"\",\r\n      nombre: \"\",\r\n      rol: \"\",\r\n      misionAsignada: \"\",\r\n      misionCodigo: \"\",\r\n      EquipoCodigo: \"\",\r\n      descripcion: \"\",\r\n    });\r\n\r\n    const misiones = ref([]);\r\n\r\n    // Watchers para actualizar el formData cuando cambian las selecciones\r\n    watch(\r\n      () => props.equipoSeleccionado,\r\n      (newVal) => {\r\n        if (newVal) {\r\n          formData.value = {\r\n            tipo: \"Equipo\",\r\n            EquipoCodigo: newVal.EquipoCodigo || \"\",\r\n            nombre: newVal.nombre || \"\",\r\n            descripcion: newVal.descripcion || \"\",\r\n            rol: \"\",\r\n            misionAsignada: \"\",\r\n            operativoID: \"\",\r\n            misionCodigo: \"\",\r\n          };\r\n        }\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    watch(\r\n      () => props.operativoSeleccionado,\r\n      (newVal) => {\r\n        if (newVal) {\r\n          formData.value = {\r\n            tipo: \"Operativo\",\r\n            operativoID: newVal.operativoID || \"\",\r\n            nombre: newVal.nombre || \"\",\r\n            rol: newVal.rol || \"\",\r\n            misionAsignada: newVal.misionAsignada || \"\",\r\n            EquipoCodigo: \"\",\r\n            misionCodigo: \"\",\r\n            descripcion: \"\",\r\n          };\r\n        }\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    watch(\r\n      () => props.misionSeleccionada,\r\n      (newVal) => {\r\n        if (newVal) {\r\n          formData.value = {\r\n            tipo: \"Misión\",\r\n            misionCodigo: newVal.misionCodigo || \"\",\r\n            nombre: newVal.nombre || \"\",\r\n            descripcion: newVal.descripcion || \"\",\r\n            rol: \"\",\r\n            misionAsignada: \"\",\r\n            EquipoCodigo: \"\",\r\n            operativoID: \"\",\r\n          };\r\n        }\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    const submitForm = async () => {\r\n  try {\r\n    let apiUrl = \"\";\r\n    let method = \"POST\";\r\n\r\n    // Mapeo de formData para usar camelCase en el cuerpo JSON\r\n    const dataToSend = {\r\n      equipoCodigo: formData.value.EquipoCodigo,\r\n      nombre: formData.value.nombre,\r\n      descripcion: formData.value.descripcion,\r\n      tipo: formData.value.tipo, // Si este campo es relevante en el backend\r\n    };\r\n\r\n    if (formData.value.tipo === \"Operativo\") {\r\n      // Lógica para operativo\r\n    } else if (formData.value.tipo === \"Mision\") {\r\n      // Lógica para misión\r\n    } else if (formData.value.tipo === \"Equipo\") {\r\n      if (props.equipoSeleccionado) {\r\n        apiUrl = `http://localhost:5056/api/equipo/${props.equipoSeleccionado.EquipoCodigo}`;\r\n        method = \"PUT\";\r\n      } else {\r\n        apiUrl = \"http://localhost:5056/api/equipo/crear\";\r\n      }\r\n    }\r\n\r\n    const response = await fetch(apiUrl, {\r\n      method: method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataToSend),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Error al guardar los datos\");\r\n    }\r\n\r\n    emit(\"data-saved\");\r\n    resetForm();\r\n  } catch (error) {\r\n    console.error(\"Error al guardar los datos:\", error);\r\n  }\r\n};\r\n\r\n    const resetForm = () => {\r\n      formData.value = {\r\n        tipo: \"\",\r\n        operativoID: \"\",\r\n        nombre: \"\",\r\n        rol: \"\",\r\n        misionAsignada: \"\",\r\n        misionCodigo: \"\",\r\n        EquipoCodigo: \"\",\r\n        descripcion: \"\",\r\n      };\r\n    };\r\n\r\n    return {\r\n      formData,\r\n      misiones,\r\n      submitForm,\r\n      resetForm,\r\n    };\r\n  },\r\n});\r\n</script>"],"mappings":"AAuFA,SAASA,GAAG,EAAEC,KAAK,EAAEC,eAAc,QAAS,KAAK;AAEjD,eAAeA,eAAe,CAAC;EAC7BC,KAAK,EAAE;IACLC,kBAAkB,EAAE;MAClBC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,qBAAqB,EAAE;MACrBH,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDE,kBAAkB,EAAE;MAClBJ,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDG,KAAKA,CAACP,KAAK,EAAE;IAAEQ;EAAK,CAAC,EAAE;IACrB,MAAMC,QAAO,GAAIZ,GAAG,CAAC;MACnBa,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,MAAM,EAAE,EAAE;MACVC,GAAG,EAAE,EAAE;MACPC,cAAc,EAAE,EAAE;MAClBC,YAAY,EAAE,EAAE;MAChBC,YAAY,EAAE,EAAE;MAChBC,WAAW,EAAE;IACf,CAAC,CAAC;IAEF,MAAMC,QAAO,GAAIrB,GAAG,CAAC,EAAE,CAAC;;IAExB;IACAC,KAAK,CACH,MAAME,KAAK,CAACC,kBAAkB,EAC7BkB,MAAM,IAAK;MACV,IAAIA,MAAM,EAAE;QACVV,QAAQ,CAACW,KAAI,GAAI;UACfV,IAAI,EAAE,QAAQ;UACdM,YAAY,EAAEG,MAAM,CAACH,YAAW,IAAK,EAAE;UACvCJ,MAAM,EAAEO,MAAM,CAACP,MAAK,IAAK,EAAE;UAC3BK,WAAW,EAAEE,MAAM,CAACF,WAAU,IAAK,EAAE;UACrCJ,GAAG,EAAE,EAAE;UACPC,cAAc,EAAE,EAAE;UAClBH,WAAW,EAAE,EAAE;UACfI,YAAY,EAAE;QAChB,CAAC;MACH;IACF,CAAC,EACD;MAAEM,SAAS,EAAE;IAAK,CACpB,CAAC;IAEDvB,KAAK,CACH,MAAME,KAAK,CAACK,qBAAqB,EAChCc,MAAM,IAAK;MACV,IAAIA,MAAM,EAAE;QACVV,QAAQ,CAACW,KAAI,GAAI;UACfV,IAAI,EAAE,WAAW;UACjBC,WAAW,EAAEQ,MAAM,CAACR,WAAU,IAAK,EAAE;UACrCC,MAAM,EAAEO,MAAM,CAACP,MAAK,IAAK,EAAE;UAC3BC,GAAG,EAAEM,MAAM,CAACN,GAAE,IAAK,EAAE;UACrBC,cAAc,EAAEK,MAAM,CAACL,cAAa,IAAK,EAAE;UAC3CE,YAAY,EAAE,EAAE;UAChBD,YAAY,EAAE,EAAE;UAChBE,WAAW,EAAE;QACf,CAAC;MACH;IACF,CAAC,EACD;MAAEI,SAAS,EAAE;IAAK,CACpB,CAAC;IAEDvB,KAAK,CACH,MAAME,KAAK,CAACM,kBAAkB,EAC7Ba,MAAM,IAAK;MACV,IAAIA,MAAM,EAAE;QACVV,QAAQ,CAACW,KAAI,GAAI;UACfV,IAAI,EAAE,QAAQ;UACdK,YAAY,EAAEI,MAAM,CAACJ,YAAW,IAAK,EAAE;UACvCH,MAAM,EAAEO,MAAM,CAACP,MAAK,IAAK,EAAE;UAC3BK,WAAW,EAAEE,MAAM,CAACF,WAAU,IAAK,EAAE;UACrCJ,GAAG,EAAE,EAAE;UACPC,cAAc,EAAE,EAAE;UAClBE,YAAY,EAAE,EAAE;UAChBL,WAAW,EAAE;QACf,CAAC;MACH;IACF,CAAC,EACD;MAAEU,SAAS,EAAE;IAAK,CACpB,CAAC;IAED,MAAMC,UAAS,GAAI,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,IAAIC,MAAK,GAAI,EAAE;QACf,IAAIC,MAAK,GAAI,MAAM;;QAEnB;QACA,MAAMC,UAAS,GAAI;UACjBC,YAAY,EAAEjB,QAAQ,CAACW,KAAK,CAACJ,YAAY;UACzCJ,MAAM,EAAEH,QAAQ,CAACW,KAAK,CAACR,MAAM;UAC7BK,WAAW,EAAER,QAAQ,CAACW,KAAK,CAACH,WAAW;UACvCP,IAAI,EAAED,QAAQ,CAACW,KAAK,CAACV,IAAI,CAAE;QAC7B,CAAC;QAED,IAAID,QAAQ,CAACW,KAAK,CAACV,IAAG,KAAM,WAAW,EAAE;UACvC;QAAA,CACF,MAAO,IAAID,QAAQ,CAACW,KAAK,CAACV,IAAG,KAAM,QAAQ,EAAE;UAC3C;QAAA,CACF,MAAO,IAAID,QAAQ,CAACW,KAAK,CAACV,IAAG,KAAM,QAAQ,EAAE;UAC3C,IAAIV,KAAK,CAACC,kBAAkB,EAAE;YAC5BsB,MAAK,GAAI,oCAAoCvB,KAAK,CAACC,kBAAkB,CAACe,YAAY,EAAE;YACpFQ,MAAK,GAAI,KAAK;UAChB,OAAO;YACLD,MAAK,GAAI,wCAAwC;UACnD;QACF;QAEA,MAAMI,QAAO,GAAI,MAAMC,KAAK,CAACL,MAAM,EAAE;UACnCC,MAAM,EAAEA,MAAM;UACdK,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,UAAU;QACjC,CAAC,CAAC;QAEF,IAAI,CAACE,QAAQ,CAACM,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;QAC/C;QAEA1B,IAAI,CAAC,YAAY,CAAC;QAClB2B,SAAS,CAAC,CAAC;MACb,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACrD;IACF,CAAC;IAEG,MAAMD,SAAQ,GAAIA,CAAA,KAAM;MACtB1B,QAAQ,CAACW,KAAI,GAAI;QACfV,IAAI,EAAE,EAAE;QACRC,WAAW,EAAE,EAAE;QACfC,MAAM,EAAE,EAAE;QACVC,GAAG,EAAE,EAAE;QACPC,cAAc,EAAE,EAAE;QAClBC,YAAY,EAAE,EAAE;QAChBC,YAAY,EAAE,EAAE;QAChBC,WAAW,EAAE;MACf,CAAC;IACH,CAAC;IAED,OAAO;MACLR,QAAQ;MACRS,QAAQ;MACRI,UAAU;MACVa;IACF,CAAC;EACH;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}